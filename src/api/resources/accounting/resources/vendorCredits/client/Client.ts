/**
 * This file was auto-generated by Fern from our API Definition.
 */

import * as environments from "../../../../../../environments";
import * as core from "../../../../../../core";
import * as Merge from "../../../../../index";
import * as serializers from "../../../../../../serialization/index";
import { mergeHeaders, mergeOnlyDefinedHeaders } from "../../../../../../core/headers";
import * as errors from "../../../../../../errors/index";

export declare namespace VendorCredits {
    export interface Options {
        environment?: core.Supplier<environments.MergeEnvironment | string>;
        /** Specify a custom URL to connect the client to. */
        baseUrl?: core.Supplier<string>;
        apiKey: core.Supplier<core.BearerToken>;
        /** Override the X-Account-Token header */
        accountToken?: core.Supplier<string | undefined>;
        /** Additional headers to include in requests. */
        headers?: Record<string, string | core.Supplier<string | undefined> | undefined>;
        fetcher?: core.FetchFunction;
    }

    export interface RequestOptions {
        /** The maximum time to wait for a response in seconds. */
        timeoutInSeconds?: number;
        /** The number of times to retry the request. Defaults to 2. */
        maxRetries?: number;
        /** A hook to abort the request. */
        abortSignal?: AbortSignal;
        /** Override the X-Account-Token header */
        accountToken?: string | undefined;
        /** Additional query string parameters to include in the request. */
        queryParams?: Record<string, unknown>;
        /** Additional headers to include in the request. */
        headers?: Record<string, string | core.Supplier<string | undefined> | undefined>;
    }
}

export class VendorCredits {
    protected readonly _options: VendorCredits.Options;

    constructor(_options: VendorCredits.Options) {
        this._options = _options;
    }

    /**
     * Returns a list of `VendorCredit` objects.{/* BEGIN_ACCOUNTING_VENDORCREDIT_FETCH_SUPPORTED_FIELDS * /}<Footer><MergeSupportedFieldsByIntegrationWidget requestType="GET" data="H4sIAAAAAAAAE+1WYW8aORD9K5E/Inb3CKVRkE4nEnIt0bG0CYkaVZE12MNi8NqO7QVC1f9+2l2SkGRJrid0vVb9uH7j55nneeP9Qhh4TLS9JW0CjOlMeaESUiep5ihJm1yi4toeW+TCkzoBI2JIkbRJH22Ce537PXudDz1SJy4zRluP/E+Bkrv3FsekTaI0jw4yJcYCeTSxwkVMz9FCgtH9lmBc7CF1IoWaIV+Tv0RSBgbr1J985rDLszbgnJ9YnSWTM7zJ0G3jnCm9kMgTDEbgyswkpqg8yICDh2iDKbAlVdVaXgNHiR55Fzx00SPzQqv1qRPvjWtH0QSlCYsMQo7zCFUE1gsm0UWt5uH+wWErWLMUp/9BE/l7oza9GenRQY0mTFLIav0hW8bD3iKeJm/i4zfLeHXRilezVTyd/VajCdT6w35rMLxqDrqdxqAigJ6//XR4edQ9Oo1rbHXSjKdXi3jIGv0hm41WvebpO7Y4ff9xGa+u9vvdi2Y8PGmdvtONwfGZ6x+f6X4nDEmdCOUxsZCX6Uj785fNhXXPxOjPM+HxcXQvhQQ3VCmvBIwITDaSgoWuGUIKK61g4UKm0yhFLiCK0bucjbqbDCyGpmjcQjCh1b3m+bmdYe/y5HEjdOYgJIwkkra3GT7rXNL+/Kj5O8bI27+EwhCMkQI5hTRvMlJ/JYxDUXB1kFBzLdh2fF6sUnbnv82o8pSy1asgplMD6rYSyqxFxSqxwvk0ywSvQhX66sIL1Fg9RVYJWUy1x1wNeAWmBvzkhZjqxDwsqX0udYlZYDOhErqedgJdVdhTsR8GIjVohebFACxv1WsqhSp4HnTekBWXbAIqwbuchGIyc2KOVI+ph2U55Ir9KktHaEmdPJaoQpFNAbz2IB+uorpEb0E5KGxw14dlkeQ6Z7vJhEX+ASyk6NHmPX/9tV7l3I+ZYLMjrWdub6DyxHdj4QfaoDQxvRjvvz06aPwy8xOIo2NWmEKD/9y0Wxz3L11V4aDtvvmRTHIOCe71lAdWqLkDf+SMdM1Iz0uHzOcidgfwUzpk+yNRGVP1UjwLfNa83/V1fcXHT9v/1+v8TXPkn7zEu54ou5kdn9Dq3cyMnCn4iX+Jf6AZ8YrZX3br/8FP3/V/9puNdf31b2ONIMnQEAAA" /></Footer>{/* END_ACCOUNTING_VENDORCREDIT_FETCH_SUPPORTED_FIELDS * /}
     *
     * @param {Merge.accounting.ListVendorCreditsRequest} request
     * @param {VendorCredits.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.accounting.vendorCredits.list({
     *         cursor: "cD0yMDIxLTAxLTA2KzAzJTNBMjQlM0E1My40MzQzMjYlMkIwMCUzQTAw"
     *     })
     */
    public list(
        request: Merge.accounting.ListVendorCreditsRequest = {},
        requestOptions?: VendorCredits.RequestOptions,
    ): core.HttpResponsePromise<Merge.accounting.PaginatedVendorCreditList> {
        return core.HttpResponsePromise.fromPromise(this.__list(request, requestOptions));
    }

    private async __list(
        request: Merge.accounting.ListVendorCreditsRequest = {},
        requestOptions?: VendorCredits.RequestOptions,
    ): Promise<core.WithRawResponse<Merge.accounting.PaginatedVendorCreditList>> {
        const {
            companyId,
            createdAfter,
            createdBefore,
            cursor,
            expand,
            includeDeletedData,
            includeRemoteData,
            includeShellData,
            modifiedAfter,
            modifiedBefore,
            pageSize,
            remoteId,
            transactionDateAfter,
            transactionDateBefore,
        } = request;
        const _queryParams: Record<string, string | string[] | object | object[] | null> = {};
        if (companyId != null) {
            _queryParams["company_id"] = companyId;
        }

        if (createdAfter != null) {
            _queryParams["created_after"] = createdAfter.toISOString();
        }

        if (createdBefore != null) {
            _queryParams["created_before"] = createdBefore.toISOString();
        }

        if (cursor != null) {
            _queryParams["cursor"] = cursor;
        }

        if (expand != null) {
            _queryParams["expand"] = serializers.accounting.ListVendorCreditsRequestExpand.jsonOrThrow(expand, {
                unrecognizedObjectKeys: "strip",
            });
        }

        if (includeDeletedData != null) {
            _queryParams["include_deleted_data"] = includeDeletedData.toString();
        }

        if (includeRemoteData != null) {
            _queryParams["include_remote_data"] = includeRemoteData.toString();
        }

        if (includeShellData != null) {
            _queryParams["include_shell_data"] = includeShellData.toString();
        }

        if (modifiedAfter != null) {
            _queryParams["modified_after"] = modifiedAfter.toISOString();
        }

        if (modifiedBefore != null) {
            _queryParams["modified_before"] = modifiedBefore.toISOString();
        }

        if (pageSize != null) {
            _queryParams["page_size"] = pageSize.toString();
        }

        if (remoteId !== undefined) {
            _queryParams["remote_id"] = remoteId;
        }

        if (transactionDateAfter !== undefined) {
            _queryParams["transaction_date_after"] = transactionDateAfter?.toISOString() ?? null;
        }

        if (transactionDateBefore !== undefined) {
            _queryParams["transaction_date_before"] = transactionDateBefore?.toISOString() ?? null;
        }

        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.MergeEnvironment.Production,
                "accounting/v1/vendor-credits",
            ),
            method: "GET",
            headers: mergeHeaders(
                this._options?.headers,
                mergeOnlyDefinedHeaders({
                    Authorization: await this._getAuthorizationHeader(),
                    "X-Account-Token": requestOptions?.accountToken,
                }),
                requestOptions?.headers,
            ),
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            timeoutMs: requestOptions?.timeoutInSeconds != null ? requestOptions.timeoutInSeconds * 1000 : 60000,
            maxRetries: requestOptions?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
        });
        if (_response.ok) {
            return {
                data: serializers.accounting.PaginatedVendorCreditList.parseOrThrow(_response.body, {
                    unrecognizedObjectKeys: "passthrough",
                    allowUnrecognizedUnionMembers: true,
                    allowUnrecognizedEnumValues: true,
                    skipValidation: true,
                    breadcrumbsPrefix: ["response"],
                }),
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.MergeError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        switch (_response.error.reason) {
            case "non-json":
                throw new errors.MergeError({
                    statusCode: _response.error.statusCode,
                    body: _response.error.rawBody,
                    rawResponse: _response.rawResponse,
                });
            case "timeout":
                throw new errors.MergeTimeoutError("Timeout exceeded when calling GET /accounting/v1/vendor-credits.");
            case "unknown":
                throw new errors.MergeError({
                    message: _response.error.errorMessage,
                    rawResponse: _response.rawResponse,
                });
        }
    }

    /**
     * Creates a `VendorCredit` object with the given values.{/* BEGIN_ACCOUNTING_VENDORCREDIT_CREATE_SUPPORTED_FIELDS * /}<Footer><MergeSupportedFieldsByIntegrationWidget requestType="POST" data="H4sIAAAAAAAAE81VYW8aORD9K8gfEbt7hNIoSFVFgGuIDtMmJEquqqzBHhYHr72xvUCo+t9PXiAhbYIaXXK6b97dmTcz783zficcPKbG3pEWAc5Nob3UKamRzAhUpEUuUQtjOxaF9KRGIJcUMiQtMkCbYqV9n1Npf+6TGnFFnhvrUfwpUQl3YnFCWiTJQnRUaDmRKJKplS7hZo4WUkzuU6JJmUNqREk9Q7EB3weyDow2rf/0GD670HUOzvmpNUU6PcPbAt1zmDNtFgpFitEY3LozhRlqDyoS4CHZQYrsGuqpd2EGgQo9ii546KJH7qXRm6pT73PXSpIpqjwuO4gFzhPUCVgvuUKXNBtHB4dHzWiDUlb/yFL1oV69uR2b8WGVpVwxKKqDEV/SUX9Bb9J3tPNuSVcXTbqarejN7I8qS6E6GA2aw9F1Y9ht14dPBLDz91dHl8fd41Na5ateg95cL+iI1wcjPhuv+o3TT3xxevJlSVfXB4PuRYOOes3TT6Y+7Jy5QefMDNpxTGpEao+phTCmI62v33dfbHaGoj8vpMfH0f0MUtxhZS0J5DLKi7GSPHaNGDJYGQ0LF3OTJRkKCQlF7wIac7cFWIzzcnFLwqTR95yHuu1R/7L3eBHac5AKxgpJy9sCf9lc0vq64wiWo5VGlA7IlUTBvGFKagxKc5PloO/CqbAWNQ9HXPIp6BSZhXLgbbAusjFaUiMWM+ORyQDqjQfFIAvVwqMFPgtVN+6UZaa3oB2UMzGxBp2X7iTfAtptIS2Kz2AhQ4+2HOChs7J8rNE/VNkm/6g9pdWXQvLZsTEzVxnqkP06oj3ARmvZ2MXk4P3xYf0t5HtCqv+ZQNuiz8uzPcRSPCfVOaRY6WsPnPvXUSkgsg0iO1/rNJ9L6g7hP9LpdywlNVeFk3NkZsI8LHdE3K/dS1XaYZTl4YuLc7gL/wWWoZ+W98J+N12hNa8jTUCK3u7Ge5Fl9gjwmy56qRL7Wf7bTE2lvFxeh+uAV8JtPfCXSc0e1nv0pE07ve7Lef+3+/5GdD+0dU/8tx//ABbvFUg1CgAA" /></Footer>{/* END_ACCOUNTING_VENDORCREDIT_CREATE_SUPPORTED_FIELDS * /}
     *
     * @param {Merge.accounting.VendorCreditEndpointRequest} request
     * @param {VendorCredits.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.accounting.vendorCredits.create({
     *         model: {}
     *     })
     */
    public create(
        request: Merge.accounting.VendorCreditEndpointRequest,
        requestOptions?: VendorCredits.RequestOptions,
    ): core.HttpResponsePromise<Merge.accounting.VendorCreditResponse> {
        return core.HttpResponsePromise.fromPromise(this.__create(request, requestOptions));
    }

    private async __create(
        request: Merge.accounting.VendorCreditEndpointRequest,
        requestOptions?: VendorCredits.RequestOptions,
    ): Promise<core.WithRawResponse<Merge.accounting.VendorCreditResponse>> {
        const { isDebugMode, runAsync, ..._body } = request;
        const _queryParams: Record<string, string | string[] | object | object[] | null> = {};
        if (isDebugMode != null) {
            _queryParams["is_debug_mode"] = isDebugMode.toString();
        }

        if (runAsync != null) {
            _queryParams["run_async"] = runAsync.toString();
        }

        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.MergeEnvironment.Production,
                "accounting/v1/vendor-credits",
            ),
            method: "POST",
            headers: mergeHeaders(
                this._options?.headers,
                mergeOnlyDefinedHeaders({
                    Authorization: await this._getAuthorizationHeader(),
                    "X-Account-Token": requestOptions?.accountToken,
                }),
                requestOptions?.headers,
            ),
            contentType: "application/json",
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            requestType: "json",
            body: serializers.accounting.VendorCreditEndpointRequest.jsonOrThrow(_body, {
                unrecognizedObjectKeys: "strip",
            }),
            timeoutMs: requestOptions?.timeoutInSeconds != null ? requestOptions.timeoutInSeconds * 1000 : 60000,
            maxRetries: requestOptions?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
        });
        if (_response.ok) {
            return {
                data: serializers.accounting.VendorCreditResponse.parseOrThrow(_response.body, {
                    unrecognizedObjectKeys: "passthrough",
                    allowUnrecognizedUnionMembers: true,
                    allowUnrecognizedEnumValues: true,
                    skipValidation: true,
                    breadcrumbsPrefix: ["response"],
                }),
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.MergeError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        switch (_response.error.reason) {
            case "non-json":
                throw new errors.MergeError({
                    statusCode: _response.error.statusCode,
                    body: _response.error.rawBody,
                    rawResponse: _response.rawResponse,
                });
            case "timeout":
                throw new errors.MergeTimeoutError("Timeout exceeded when calling POST /accounting/v1/vendor-credits.");
            case "unknown":
                throw new errors.MergeError({
                    message: _response.error.errorMessage,
                    rawResponse: _response.rawResponse,
                });
        }
    }

    /**
     * Returns a `VendorCredit` object with the given `id`.{/* BEGIN_ACCOUNTING_VENDORCREDIT_FETCH_SUPPORTED_FIELDS * /}<Footer><MergeSupportedFieldsByIntegrationWidget requestType="GET" data="H4sIAAAAAAAAE+1WYW8aORD9K5E/Inb3CKVRkE4nEnIt0bG0CYkaVZE12MNi8NqO7QVC1f9+2l2SkGRJrid0vVb9uH7j55nneeP9Qhh4TLS9JW0CjOlMeaESUiep5ihJm1yi4toeW+TCkzoBI2JIkbRJH22Ce537PXudDz1SJy4zRluP/E+Bkrv3FsekTaI0jw4yJcYCeTSxwkVMz9FCgtH9lmBc7CF1IoWaIV+Tv0RSBgbr1J985rDLszbgnJ9YnSWTM7zJ0G3jnCm9kMgTDEbgyswkpqg8yICDh2iDKbAlVdVaXgNHiR55Fzx00SPzQqv1qRPvjWtH0QSlCYsMQo7zCFUE1gsm0UWt5uH+wWErWLMUp/9BE/l7oza9GenRQY0mTFLIav0hW8bD3iKeJm/i4zfLeHXRilezVTyd/VajCdT6w35rMLxqDrqdxqAigJ6//XR4edQ9Oo1rbHXSjKdXi3jIGv0hm41WvebpO7Y4ff9xGa+u9vvdi2Y8PGmdvtONwfGZ6x+f6X4nDEmdCOUxsZCX6Uj785fNhXXPxOjPM+HxcXQvhQQ3VCmvBIwITDaSgoWuGUIKK61g4UKm0yhFLiCK0bucjbqbDCyGpmjcQjCh1b3m+bmdYe/y5HEjdOYgJIwkkra3GT7rXNL+/Kj5O8bI27+EwhCMkQI5hTRvMlJ/JYxDUXB1kFBzLdh2fF6sUnbnv82o8pSy1asgplMD6rYSyqxFxSqxwvk0ywSvQhX66sIL1Fg9RVYJWUy1x1wNeAWmBvzkhZjqxDwsqX0udYlZYDOhErqedgJdVdhTsR8GIjVohebFACxv1WsqhSp4HnTekBWXbAIqwbuchGIyc2KOVI+ph2U55Ir9KktHaEmdPJaoQpFNAbz2IB+uorpEb0E5KGxw14dlkeQ6Z7vJhEX+ASyk6NHmPX/9tV7l3I+ZYLMjrWdub6DyxHdj4QfaoDQxvRjvvz06aPwy8xOIo2NWmEKD/9y0Wxz3L11V4aDtvvmRTHIOCe71lAdWqLkDf+SMdM1Iz0uHzOcidgfwUzpk+yNRGVP1UjwLfNa83/V1fcXHT9v/1+v8TXPkn7zEu54ou5kdn9Dq3cyMnCn4iX+Jf6AZ8YrZX3br/8FP3/V/9puNdf31b2ONIMnQEAAA" /></Footer>{/* END_ACCOUNTING_VENDORCREDIT_FETCH_SUPPORTED_FIELDS * /}
     *
     * @param {string} id
     * @param {Merge.accounting.RetrieveVendorCreditsRequest} request
     * @param {VendorCredits.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.accounting.vendorCredits.retrieve("id")
     */
    public retrieve(
        id: string,
        request: Merge.accounting.RetrieveVendorCreditsRequest = {},
        requestOptions?: VendorCredits.RequestOptions,
    ): core.HttpResponsePromise<Merge.accounting.VendorCredit> {
        return core.HttpResponsePromise.fromPromise(this.__retrieve(id, request, requestOptions));
    }

    private async __retrieve(
        id: string,
        request: Merge.accounting.RetrieveVendorCreditsRequest = {},
        requestOptions?: VendorCredits.RequestOptions,
    ): Promise<core.WithRawResponse<Merge.accounting.VendorCredit>> {
        const { expand, includeRemoteData, includeShellData } = request;
        const _queryParams: Record<string, string | string[] | object | object[] | null> = {};
        if (expand != null) {
            _queryParams["expand"] = serializers.accounting.RetrieveVendorCreditsRequestExpand.jsonOrThrow(expand, {
                unrecognizedObjectKeys: "strip",
            });
        }

        if (includeRemoteData != null) {
            _queryParams["include_remote_data"] = includeRemoteData.toString();
        }

        if (includeShellData != null) {
            _queryParams["include_shell_data"] = includeShellData.toString();
        }

        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.MergeEnvironment.Production,
                `accounting/v1/vendor-credits/${encodeURIComponent(id)}`,
            ),
            method: "GET",
            headers: mergeHeaders(
                this._options?.headers,
                mergeOnlyDefinedHeaders({
                    Authorization: await this._getAuthorizationHeader(),
                    "X-Account-Token": requestOptions?.accountToken,
                }),
                requestOptions?.headers,
            ),
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            timeoutMs: requestOptions?.timeoutInSeconds != null ? requestOptions.timeoutInSeconds * 1000 : 60000,
            maxRetries: requestOptions?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
        });
        if (_response.ok) {
            return {
                data: serializers.accounting.VendorCredit.parseOrThrow(_response.body, {
                    unrecognizedObjectKeys: "passthrough",
                    allowUnrecognizedUnionMembers: true,
                    allowUnrecognizedEnumValues: true,
                    skipValidation: true,
                    breadcrumbsPrefix: ["response"],
                }),
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.MergeError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        switch (_response.error.reason) {
            case "non-json":
                throw new errors.MergeError({
                    statusCode: _response.error.statusCode,
                    body: _response.error.rawBody,
                    rawResponse: _response.rawResponse,
                });
            case "timeout":
                throw new errors.MergeTimeoutError(
                    "Timeout exceeded when calling GET /accounting/v1/vendor-credits/{id}.",
                );
            case "unknown":
                throw new errors.MergeError({
                    message: _response.error.errorMessage,
                    rawResponse: _response.rawResponse,
                });
        }
    }

    /**
     * Updates a `VendorCredit` object with the given `id`.{/* BEGIN_ACCOUNTING_VENDORCREDIT_EDIT_SUPPORTED_FIELDS * /}<Footer><MergeSupportedFieldsByIntegrationWidget requestType="EDIT" data="H4sIAAAAAAAAE71U204bMRD9FeTHaC8NISBWqqpcKCRSNlwWBELImngnGydee7G9SQji3ytvIhpaoGoFffPYM2fOnJnxI2FgMVP6gUQEGFOltFxmxCO5SlGQiFyhTJXuaEy5JR6BgseQI4nIAHWGO63nmJ3WaY94xJRFobTF9DtHkZoTjWMSkTB33n4p+ZhjGk40NyFTc9SQYfgc4o+rGOIRweUM0w34eyBrR39D/RfTPRvHugBj7ESrMpuc432J5i3MmVQLgWmG/gjMmpnAHKUF4adgIdxC8vUa6rU7V0OKAi2mXbDQRYvMciU3WSfWFiYKwwmKIqgYBCnOQ5QhaMuZQBM2G4e7B4dNf4NSZf9GM/G1Xpvej9TooEYzJiiUtUHClnHSW8TTbC/u7C3j1WUzXs1W8XT2pUYzqA2SQXOY3DSG3VZ9+IoDvdi/Prxqd9v9uMZWR414erOIE1YfJGw2WvUa/WO26J+cLePVze6ge9mIk6Nm/1jVh51zM+icq0ErCIhHuLSYaXBlGhLdPm5fbGYmRntRcosvvXs5ZLilyrolUHC/KEeCs8A0AshhpSQsTMBUHuaYcghjtMahUXNfgsagqAa3Eowr+ay5y9tKeldHLwehNQcuYCSQRFaX+Nvkkuh2ayNogZqrlHiEqbwA+eBOpdYomTvikk1AZkg1VNUJLtHNgCzzEWriEY25ski5Q7DKgqCQO2hnapAGKqo0XYfPq6Ujdy7uvuQa01PQkKNF7XjdPXmvqXtWcjZrKzUzO0PpGHyMzD9h/bXQ9HK8u98+qH+C4P8gqVuMlxYtwE7+qDmbubZuvj9eQf99J7b1pYV7MUEBD+7HoJvhoZXOjsUbbbtGrT6mUw7J/7RleKc3XDJRGj5HqsbUwvI/bMDd0w/5COivvAYAAA==" /></Footer>{/* END_ACCOUNTING_VENDORCREDIT_EDIT_SUPPORTED_FIELDS * /}
     *
     * @param {string} id
     * @param {Merge.accounting.PatchedVendorCreditEndpointRequest} request
     * @param {VendorCredits.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.accounting.vendorCredits.partialUpdate("id", {
     *         model: {}
     *     })
     */
    public partialUpdate(
        id: string,
        request: Merge.accounting.PatchedVendorCreditEndpointRequest,
        requestOptions?: VendorCredits.RequestOptions,
    ): core.HttpResponsePromise<Merge.accounting.VendorCreditResponse> {
        return core.HttpResponsePromise.fromPromise(this.__partialUpdate(id, request, requestOptions));
    }

    private async __partialUpdate(
        id: string,
        request: Merge.accounting.PatchedVendorCreditEndpointRequest,
        requestOptions?: VendorCredits.RequestOptions,
    ): Promise<core.WithRawResponse<Merge.accounting.VendorCreditResponse>> {
        const { isDebugMode, runAsync, ..._body } = request;
        const _queryParams: Record<string, string | string[] | object | object[] | null> = {};
        if (isDebugMode != null) {
            _queryParams["is_debug_mode"] = isDebugMode.toString();
        }

        if (runAsync != null) {
            _queryParams["run_async"] = runAsync.toString();
        }

        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.MergeEnvironment.Production,
                `accounting/v1/vendor-credits/${encodeURIComponent(id)}`,
            ),
            method: "PATCH",
            headers: mergeHeaders(
                this._options?.headers,
                mergeOnlyDefinedHeaders({
                    Authorization: await this._getAuthorizationHeader(),
                    "X-Account-Token": requestOptions?.accountToken,
                }),
                requestOptions?.headers,
            ),
            contentType: "application/json",
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            requestType: "json",
            body: serializers.accounting.PatchedVendorCreditEndpointRequest.jsonOrThrow(_body, {
                unrecognizedObjectKeys: "strip",
            }),
            timeoutMs: requestOptions?.timeoutInSeconds != null ? requestOptions.timeoutInSeconds * 1000 : 60000,
            maxRetries: requestOptions?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
        });
        if (_response.ok) {
            return {
                data: serializers.accounting.VendorCreditResponse.parseOrThrow(_response.body, {
                    unrecognizedObjectKeys: "passthrough",
                    allowUnrecognizedUnionMembers: true,
                    allowUnrecognizedEnumValues: true,
                    skipValidation: true,
                    breadcrumbsPrefix: ["response"],
                }),
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.MergeError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        switch (_response.error.reason) {
            case "non-json":
                throw new errors.MergeError({
                    statusCode: _response.error.statusCode,
                    body: _response.error.rawBody,
                    rawResponse: _response.rawResponse,
                });
            case "timeout":
                throw new errors.MergeTimeoutError(
                    "Timeout exceeded when calling PATCH /accounting/v1/vendor-credits/{id}.",
                );
            case "unknown":
                throw new errors.MergeError({
                    message: _response.error.errorMessage,
                    rawResponse: _response.rawResponse,
                });
        }
    }

    /**
     * Creates a new VendorCreditApplyLine to apply a vendor credit to an invoice{/* BEGIN_ACCOUNTING_VENDORCREDIT_CREATE_SUPPORTED_FIELDS * /}<Footer><MergeSupportedFieldsByIntegrationWidget requestType="POST" data="H4sIAAAAAAAAE81VYW8aORD9K8gfEbt7hNIoSFVFgGuIDtMmJEquqqzBHhYHr72xvUCo+t9PXiAhbYIaXXK6b97dmTcz783zficcPKbG3pEWAc5Nob3UKamRzAhUpEUuUQtjOxaF9KRGIJcUMiQtMkCbYqV9n1Npf+6TGnFFnhvrUfwpUQl3YnFCWiTJQnRUaDmRKJKplS7hZo4WUkzuU6JJmUNqREk9Q7EB3weyDow2rf/0GD670HUOzvmpNUU6PcPbAt1zmDNtFgpFitEY3LozhRlqDyoS4CHZQYrsGuqpd2EGgQo9ii546KJH7qXRm6pT73PXSpIpqjwuO4gFzhPUCVgvuUKXNBtHB4dHzWiDUlb/yFL1oV69uR2b8WGVpVwxKKqDEV/SUX9Bb9J3tPNuSVcXTbqarejN7I8qS6E6GA2aw9F1Y9ht14dPBLDz91dHl8fd41Na5ateg95cL+iI1wcjPhuv+o3TT3xxevJlSVfXB4PuRYOOes3TT6Y+7Jy5QefMDNpxTGpEao+phTCmI62v33dfbHaGoj8vpMfH0f0MUtxhZS0J5DLKi7GSPHaNGDJYGQ0LF3OTJRkKCQlF7wIac7cFWIzzcnFLwqTR95yHuu1R/7L3eBHac5AKxgpJy9sCf9lc0vq64wiWo5VGlA7IlUTBvGFKagxKc5PloO/CqbAWNQ9HXPIp6BSZhXLgbbAusjFaUiMWM+ORyQDqjQfFIAvVwqMFPgtVN+6UZaa3oB2UMzGxBp2X7iTfAtptIS2Kz2AhQ4+2HOChs7J8rNE/VNkm/6g9pdWXQvLZsTEzVxnqkP06oj3ARmvZ2MXk4P3xYf0t5HtCqv+ZQNuiz8uzPcRSPCfVOaRY6WsPnPvXUSkgsg0iO1/rNJ9L6g7hP9LpdywlNVeFk3NkZsI8LHdE3K/dS1XaYZTl4YuLc7gL/wWWoZ+W98J+N12hNa8jTUCK3u7Ge5Fl9gjwmy56qRL7Wf7bTE2lvFxeh+uAV8JtPfCXSc0e1nv0pE07ve7Lef+3+/5GdD+0dU/8tx//ABbvFUg1CgAA" /></Footer>{/* END_ACCOUNTING_VENDORCREDIT_CREATE_SUPPORTED_FIELDS * /}
     *
     * @param {string} id
     * @param {Merge.accounting.ApplyVendorCreditRequest} request
     * @param {VendorCredits.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.accounting.vendorCredits.applicationCreate("id", {
     *         appliedDate: new Date("2024-01-15T09:30:00.000Z"),
     *         appliedAmount: "applied_amount"
     *     })
     */
    public applicationCreate(
        id: string,
        request: Merge.accounting.ApplyVendorCreditRequest,
        requestOptions?: VendorCredits.RequestOptions,
    ): core.HttpResponsePromise<Merge.accounting.VendorCreditResponse> {
        return core.HttpResponsePromise.fromPromise(this.__applicationCreate(id, request, requestOptions));
    }

    private async __applicationCreate(
        id: string,
        request: Merge.accounting.ApplyVendorCreditRequest,
        requestOptions?: VendorCredits.RequestOptions,
    ): Promise<core.WithRawResponse<Merge.accounting.VendorCreditResponse>> {
        const { isDebugMode, runAsync, ..._body } = request;
        const _queryParams: Record<string, string | string[] | object | object[] | null> = {};
        if (isDebugMode != null) {
            _queryParams["is_debug_mode"] = isDebugMode.toString();
        }

        if (runAsync != null) {
            _queryParams["run_async"] = runAsync.toString();
        }

        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.MergeEnvironment.Production,
                `accounting/v1/vendor-credits/${encodeURIComponent(id)}/application`,
            ),
            method: "POST",
            headers: mergeHeaders(
                this._options?.headers,
                mergeOnlyDefinedHeaders({
                    Authorization: await this._getAuthorizationHeader(),
                    "X-Account-Token": requestOptions?.accountToken,
                }),
                requestOptions?.headers,
            ),
            contentType: "application/json",
            queryParameters: { ..._queryParams, ...requestOptions?.queryParams },
            requestType: "json",
            body: serializers.accounting.ApplyVendorCreditRequest.jsonOrThrow(_body, {
                unrecognizedObjectKeys: "strip",
            }),
            timeoutMs: requestOptions?.timeoutInSeconds != null ? requestOptions.timeoutInSeconds * 1000 : 60000,
            maxRetries: requestOptions?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
        });
        if (_response.ok) {
            return {
                data: serializers.accounting.VendorCreditResponse.parseOrThrow(_response.body, {
                    unrecognizedObjectKeys: "passthrough",
                    allowUnrecognizedUnionMembers: true,
                    allowUnrecognizedEnumValues: true,
                    skipValidation: true,
                    breadcrumbsPrefix: ["response"],
                }),
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.MergeError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        switch (_response.error.reason) {
            case "non-json":
                throw new errors.MergeError({
                    statusCode: _response.error.statusCode,
                    body: _response.error.rawBody,
                    rawResponse: _response.rawResponse,
                });
            case "timeout":
                throw new errors.MergeTimeoutError(
                    "Timeout exceeded when calling POST /accounting/v1/vendor-credits/{id}/application.",
                );
            case "unknown":
                throw new errors.MergeError({
                    message: _response.error.errorMessage,
                    rawResponse: _response.rawResponse,
                });
        }
    }

    /**
     * Returns metadata for `VendorCredit` PATCHs.{/* BEGIN_ACCOUNTING_VENDORCREDIT_FETCH_SUPPORTED_FIELDS * /}<Footer><MergeSupportedFieldsByIntegrationWidget requestType="GET" data="H4sIAAAAAAAAE+1WYW8aORD9K5E/Inb3CKVRkE4nEnIt0bG0CYkaVZE12MNi8NqO7QVC1f9+2l2SkGRJrid0vVb9uH7j55nneeP9Qhh4TLS9JW0CjOlMeaESUiep5ihJm1yi4toeW+TCkzoBI2JIkbRJH22Ce537PXudDz1SJy4zRluP/E+Bkrv3FsekTaI0jw4yJcYCeTSxwkVMz9FCgtH9lmBc7CF1IoWaIV+Tv0RSBgbr1J985rDLszbgnJ9YnSWTM7zJ0G3jnCm9kMgTDEbgyswkpqg8yICDh2iDKbAlVdVaXgNHiR55Fzx00SPzQqv1qRPvjWtH0QSlCYsMQo7zCFUE1gsm0UWt5uH+wWErWLMUp/9BE/l7oza9GenRQY0mTFLIav0hW8bD3iKeJm/i4zfLeHXRilezVTyd/VajCdT6w35rMLxqDrqdxqAigJ6//XR4edQ9Oo1rbHXSjKdXi3jIGv0hm41WvebpO7Y4ff9xGa+u9vvdi2Y8PGmdvtONwfGZ6x+f6X4nDEmdCOUxsZCX6Uj785fNhXXPxOjPM+HxcXQvhQQ3VCmvBIwITDaSgoWuGUIKK61g4UKm0yhFLiCK0bucjbqbDCyGpmjcQjCh1b3m+bmdYe/y5HEjdOYgJIwkkra3GT7rXNL+/Kj5O8bI27+EwhCMkQI5hTRvMlJ/JYxDUXB1kFBzLdh2fF6sUnbnv82o8pSy1asgplMD6rYSyqxFxSqxwvk0ywSvQhX66sIL1Fg9RVYJWUy1x1wNeAWmBvzkhZjqxDwsqX0udYlZYDOhErqedgJdVdhTsR8GIjVohebFACxv1WsqhSp4HnTekBWXbAIqwbuchGIyc2KOVI+ph2U55Ir9KktHaEmdPJaoQpFNAbz2IB+uorpEb0E5KGxw14dlkeQ6Z7vJhEX+ASyk6NHmPX/9tV7l3I+ZYLMjrWdub6DyxHdj4QfaoDQxvRjvvz06aPwy8xOIo2NWmEKD/9y0Wxz3L11V4aDtvvmRTHIOCe71lAdWqLkDf+SMdM1Iz0uHzOcidgfwUzpk+yNRGVP1UjwLfNa83/V1fcXHT9v/1+v8TXPkn7zEu54ou5kdn9Dq3cyMnCn4iX+Jf6AZ8YrZX3br/8FP3/V/9puNdf31b2ONIMnQEAAA" /></Footer>{/* END_ACCOUNTING_VENDORCREDIT_FETCH_SUPPORTED_FIELDS * /}
     *
     * @param {string} id
     * @param {Merge.accounting.MetaPatchRetrieveVendorCreditsRequest} request
     * @param {VendorCredits.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.accounting.vendorCredits.metaPatchRetrieve("id")
     */
    public metaPatchRetrieve(
        id: string,
        request: Merge.accounting.MetaPatchRetrieveVendorCreditsRequest = {},
        requestOptions?: VendorCredits.RequestOptions,
    ): core.HttpResponsePromise<Merge.accounting.MetaResponse> {
        return core.HttpResponsePromise.fromPromise(this.__metaPatchRetrieve(id, request, requestOptions));
    }

    private async __metaPatchRetrieve(
        id: string,
        request: Merge.accounting.MetaPatchRetrieveVendorCreditsRequest = {},
        requestOptions?: VendorCredits.RequestOptions,
    ): Promise<core.WithRawResponse<Merge.accounting.MetaResponse>> {
        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.MergeEnvironment.Production,
                `accounting/v1/vendor-credits/meta/patch/${encodeURIComponent(id)}`,
            ),
            method: "GET",
            headers: mergeHeaders(
                this._options?.headers,
                mergeOnlyDefinedHeaders({
                    Authorization: await this._getAuthorizationHeader(),
                    "X-Account-Token": requestOptions?.accountToken,
                }),
                requestOptions?.headers,
            ),
            queryParameters: requestOptions?.queryParams,
            timeoutMs: requestOptions?.timeoutInSeconds != null ? requestOptions.timeoutInSeconds * 1000 : 60000,
            maxRetries: requestOptions?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
        });
        if (_response.ok) {
            return {
                data: serializers.accounting.MetaResponse.parseOrThrow(_response.body, {
                    unrecognizedObjectKeys: "passthrough",
                    allowUnrecognizedUnionMembers: true,
                    allowUnrecognizedEnumValues: true,
                    skipValidation: true,
                    breadcrumbsPrefix: ["response"],
                }),
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.MergeError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        switch (_response.error.reason) {
            case "non-json":
                throw new errors.MergeError({
                    statusCode: _response.error.statusCode,
                    body: _response.error.rawBody,
                    rawResponse: _response.rawResponse,
                });
            case "timeout":
                throw new errors.MergeTimeoutError(
                    "Timeout exceeded when calling GET /accounting/v1/vendor-credits/meta/patch/{id}.",
                );
            case "unknown":
                throw new errors.MergeError({
                    message: _response.error.errorMessage,
                    rawResponse: _response.rawResponse,
                });
        }
    }

    /**
     * Returns metadata for `VendorCredit` POSTs.{/* BEGIN_ACCOUNTING_VENDORCREDIT_FETCH_SUPPORTED_FIELDS * /}<Footer><MergeSupportedFieldsByIntegrationWidget requestType="GET" data="H4sIAAAAAAAAE+1WYW8aORD9K5E/Inb3CKVRkE4nEnIt0bG0CYkaVZE12MNi8NqO7QVC1f9+2l2SkGRJrid0vVb9uH7j55nneeP9Qhh4TLS9JW0CjOlMeaESUiep5ihJm1yi4toeW+TCkzoBI2JIkbRJH22Ce537PXudDz1SJy4zRluP/E+Bkrv3FsekTaI0jw4yJcYCeTSxwkVMz9FCgtH9lmBc7CF1IoWaIV+Tv0RSBgbr1J985rDLszbgnJ9YnSWTM7zJ0G3jnCm9kMgTDEbgyswkpqg8yICDh2iDKbAlVdVaXgNHiR55Fzx00SPzQqv1qRPvjWtH0QSlCYsMQo7zCFUE1gsm0UWt5uH+wWErWLMUp/9BE/l7oza9GenRQY0mTFLIav0hW8bD3iKeJm/i4zfLeHXRilezVTyd/VajCdT6w35rMLxqDrqdxqAigJ6//XR4edQ9Oo1rbHXSjKdXi3jIGv0hm41WvebpO7Y4ff9xGa+u9vvdi2Y8PGmdvtONwfGZ6x+f6X4nDEmdCOUxsZCX6Uj785fNhXXPxOjPM+HxcXQvhQQ3VCmvBIwITDaSgoWuGUIKK61g4UKm0yhFLiCK0bucjbqbDCyGpmjcQjCh1b3m+bmdYe/y5HEjdOYgJIwkkra3GT7rXNL+/Kj5O8bI27+EwhCMkQI5hTRvMlJ/JYxDUXB1kFBzLdh2fF6sUnbnv82o8pSy1asgplMD6rYSyqxFxSqxwvk0ywSvQhX66sIL1Fg9RVYJWUy1x1wNeAWmBvzkhZjqxDwsqX0udYlZYDOhErqedgJdVdhTsR8GIjVohebFACxv1WsqhSp4HnTekBWXbAIqwbuchGIyc2KOVI+ph2U55Ir9KktHaEmdPJaoQpFNAbz2IB+uorpEb0E5KGxw14dlkeQ6Z7vJhEX+ASyk6NHmPX/9tV7l3I+ZYLMjrWdub6DyxHdj4QfaoDQxvRjvvz06aPwy8xOIo2NWmEKD/9y0Wxz3L11V4aDtvvmRTHIOCe71lAdWqLkDf+SMdM1Iz0uHzOcidgfwUzpk+yNRGVP1UjwLfNa83/V1fcXHT9v/1+v8TXPkn7zEu54ou5kdn9Dq3cyMnCn4iX+Jf6AZ8YrZX3br/8FP3/V/9puNdf31b2ONIMnQEAAA" /></Footer>{/* END_ACCOUNTING_VENDORCREDIT_FETCH_SUPPORTED_FIELDS * /}
     *
     * @param {VendorCredits.RequestOptions} requestOptions - Request-specific configuration.
     *
     * @example
     *     await client.accounting.vendorCredits.metaPostRetrieve()
     */
    public metaPostRetrieve(
        requestOptions?: VendorCredits.RequestOptions,
    ): core.HttpResponsePromise<Merge.accounting.MetaResponse> {
        return core.HttpResponsePromise.fromPromise(this.__metaPostRetrieve(requestOptions));
    }

    private async __metaPostRetrieve(
        requestOptions?: VendorCredits.RequestOptions,
    ): Promise<core.WithRawResponse<Merge.accounting.MetaResponse>> {
        const _response = await (this._options.fetcher ?? core.fetcher)({
            url: core.url.join(
                (await core.Supplier.get(this._options.baseUrl)) ??
                    (await core.Supplier.get(this._options.environment)) ??
                    environments.MergeEnvironment.Production,
                "accounting/v1/vendor-credits/meta/post",
            ),
            method: "GET",
            headers: mergeHeaders(
                this._options?.headers,
                mergeOnlyDefinedHeaders({
                    Authorization: await this._getAuthorizationHeader(),
                    "X-Account-Token": requestOptions?.accountToken,
                }),
                requestOptions?.headers,
            ),
            queryParameters: requestOptions?.queryParams,
            timeoutMs: requestOptions?.timeoutInSeconds != null ? requestOptions.timeoutInSeconds * 1000 : 60000,
            maxRetries: requestOptions?.maxRetries,
            abortSignal: requestOptions?.abortSignal,
        });
        if (_response.ok) {
            return {
                data: serializers.accounting.MetaResponse.parseOrThrow(_response.body, {
                    unrecognizedObjectKeys: "passthrough",
                    allowUnrecognizedUnionMembers: true,
                    allowUnrecognizedEnumValues: true,
                    skipValidation: true,
                    breadcrumbsPrefix: ["response"],
                }),
                rawResponse: _response.rawResponse,
            };
        }

        if (_response.error.reason === "status-code") {
            throw new errors.MergeError({
                statusCode: _response.error.statusCode,
                body: _response.error.body,
                rawResponse: _response.rawResponse,
            });
        }

        switch (_response.error.reason) {
            case "non-json":
                throw new errors.MergeError({
                    statusCode: _response.error.statusCode,
                    body: _response.error.rawBody,
                    rawResponse: _response.rawResponse,
                });
            case "timeout":
                throw new errors.MergeTimeoutError(
                    "Timeout exceeded when calling GET /accounting/v1/vendor-credits/meta/post.",
                );
            case "unknown":
                throw new errors.MergeError({
                    message: _response.error.errorMessage,
                    rawResponse: _response.rawResponse,
                });
        }
    }

    protected async _getAuthorizationHeader(): Promise<string> {
        return `Bearer ${await core.Supplier.get(this._options.apiKey)}`;
    }
}
