/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../../mock-server/MockServerPool";
import { MergeClient } from "../../../src/Client";

describe("AccountDetails", () => {
    test("retrieve", async () => {
        const server = mockServerPool.createServer();
        const client = new MergeClient({ apiKey: "test", accountToken: "test", environment: server.baseUrl });

        const rawResponseBody = {
            id: "0496d4c2-42e6-4072-80b3-7b69bfdc76fd",
            integration: "BambooHR",
            integration_slug: "bamboohr",
            category: "hris",
            end_user_origin_id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
            end_user_organization_name: "Waystar Royco",
            end_user_email_address: "kendall.roy@waystar-royco.com",
            status: "COMPLETE",
            webhook_listener_url: "https://api.merge.dev/api/integrations/webhook-listener/7fc3mee0UW8ecV4",
            is_duplicate: true,
            account_type: "PRODUCTION",
            completed_at: "2024-08-26T20:11:19Z",
        };
        server
            .mockEndpoint()
            .get("/filestorage/v1/account-details")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.filestorage.accountDetails.retrieve();
        expect(response).toEqual({
            id: "0496d4c2-42e6-4072-80b3-7b69bfdc76fd",
            integration: "BambooHR",
            integrationSlug: "bamboohr",
            category: "hris",
            endUserOriginId: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
            endUserOrganizationName: "Waystar Royco",
            endUserEmailAddress: "kendall.roy@waystar-royco.com",
            status: "COMPLETE",
            webhookListenerUrl: "https://api.merge.dev/api/integrations/webhook-listener/7fc3mee0UW8ecV4",
            isDuplicate: true,
            accountType: "PRODUCTION",
            completedAt: new Date("2024-08-26T20:11:19.000Z"),
        });
    });
});
